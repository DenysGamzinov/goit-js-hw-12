{"version":3,"file":"index.js","sources":["../src/js/refs.js","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/js/onFormSubmit.js","../src/main.js"],"sourcesContent":["export const refs = {\n    form: document.querySelector('.form'),\n    input: document.querySelector('#user-input'),\n    button: document.querySelector('.search-button'),\n    gallery: document.querySelector('.gallery'),\n    loadMore: document.querySelector('.load-button'),\n    loader: document.querySelector('#loader'),\n  };","// import { refs } from './refs';\n// import axios from 'axios';\n\n// export async function pixabayApi(userText, page) {\n//   refs.loader.classList.add('loader');\n//   axios.defaults.baseURL = 'https://pixabay.com/api/';\n//   const API_KEY = '42305784-5d55228baaa9a6392a5b2668b';\n//   axios.defaults.params = {\n//     key: API_KEY,\n//     q: userText,\n//     image_type: 'photo',\n//     orientation: 'horizontal',\n//     safesearch: true,\n//     per_page: 15,\n//     page,\n//   };\n//   try {\n//     const { data } = await axios.get();\n//     refs.loader.classList.remove('loader');\n//     return data;\n//   } catch (error) {\n//     iziToast.error({\n//       position: 'topLeft',\n//       message: 'Sorry, there is some problem. Please try again later.',\n//     });\n//   }\n// }\n\n\nimport axios from 'axios';\n\nconst API_KEY = \"42305784-5d55228baaa9a6392a5b2668b\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\nexport async function getImagesByQuery(query, page = 1) {\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: true,\n    page: page,\n    per_page: 15, \n  };\n\n  try {\n    const response = await axios.get(BASE_URL, { params });\n    return response.data; \n  } catch (error) {\n    console.error('Sorry, there is some problem. Please try again later.', error);\n    throw error; \n  }\n}","// import iziToast from 'izitoast';\n// import 'izitoast/dist/css/iziToast.min.css';\n// import { refs } from './refs';\n// import SimpleLightbox from 'simplelightbox';\n// import 'simplelightbox/dist/simple-lightbox.min.css';\n// import { pixabayApi } from './pixabay-api';\n\n// let gallery = new SimpleLightbox('.gallery a', { captions: false });\n\n// export function checkFunction(userData) {\n//   if (userData.hits.length === 0) {\n//     iziToast.error({\n//       message:\n//         'Sorry, there are no images matching your search query. Please try again!',\n//       position: 'topLeft',\n//     });\n//   } else {\n//     iziToast.success({\n//       message: `A total of ${userData.totalHits} images were successfully found`,\n//       position: 'topLeft',\n//     });\n\n//     if (userData.totalHits > 15) {\n//       refs.loadMore.classList.remove('is-hidden');\n//       let page = 2;\n//       const totalPages = Math.ceil(userData.totalHits / 15);\n//       refs.loadMore.addEventListener('click', async () => {\n//         if (page > totalPages) {\n//           refs.loadMore.classList.add('is-hidden');\n//           return iziToast.error({\n//             position: 'topLeft',\n//             message:\n//               \"We're sorry, but you've reached the end of search results.\",\n//           });\n//         }\n//         try {\n//           const results = await pixabayApi(refs.input.value.trim(), page);\n//           renderFunction(results);\n//           page += 1;\n//         } catch (error) {\n//           iziToast.error({\n//             position: 'topLeft',\n//             message: 'Sorry, there is some problem. Please try again later.',\n//           });\n//         }\n//         const height =\n//           refs.gallery.firstElementChild.getBoundingClientRect().height;\n\n//         window.scrollBy({\n//           behavior: 'smooth',\n//           top: height * 2,\n//         });\n//       });\n//     }\n//     renderFunction(userData);\n//   }\n// }\n\n// function renderFunction(userData) {\n//   const markup = userData.hits\n//     .map(\n//       ({\n//         webformatURL,\n//         largeImageURL,\n//         tags,\n//         likes,\n//         views,\n//         comments,\n//         downloads,\n//       }) => {\n//         return `<li class=\"gallery-item\">\n//         <a href=\"${largeImageURL}\">\n//           <img src=\"${webformatURL}\" alt=\"${tags}\" title=\"${tags}\"/>\n//           <ul>\n//             <li>\n//               <h3>Likes</h3>\n//               <p>${likes}</p>\n//             </li>\n//             <li>\n//               <h3>Vievs</h3>\n//               <p>${views}</p>\n//             </li>\n//             <li>\n//               <h3>Comments</h3>\n//               <p>${comments}</p>\n//             </li>\n//             <li>\n//               <h3>Downloads</h3>\n//               <p>${downloads}</p>\n//             </li>\n//           </ul>\n//         </a></li>`;\n//       }\n//     )\n//     .join('');\n//   refs.gallery.insertAdjacentHTML('beforeend', markup);\n//   gallery.refresh();\n// }\n\n\nimport { refs } from './refs';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast'; \n\nlet galleryLightboxInstance;\n\nexport function createGallery(images) {\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"gallery-item\">\n          <a href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" title=\"${tags}\"/>\n            <div class=\"info\">\n              <h3>Likes</h3>\n              <p>${likes}</p>\n              <h3>Views</h3>\n              <p>${views}</p>\n              <h3>Comments</h3>\n              <p>${comments}</p>\n              <h3>Downloads</h3>\n              <p>${downloads}</p>\n            </div>\n          </a>\n        </li>`;\n      }\n    )\n    .join('');\n\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\n\n  \n  if (!galleryLightboxInstance) {\n    galleryLightboxInstance = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt', \n      captionDelay: 250,\n    });\n  } else {\n    galleryLightboxInstance.refresh();\n  }\n}\n\nexport function clearGallery() {\n  refs.gallery.innerHTML = '';\n}\n\nexport function showLoader() {\n  refs.loader.classList.remove('is-hidden');\n}\n\nexport function hideLoader() {\n  refs.loader.classList.add('is-hidden');\n}\n\n\nexport function showLoadMoreButton() { \n  refs.loadMore.classList.remove('is-hidden');\n}\n\nexport function hideLoadMoreButton() { \n  refs.loadMore.classList.add('is-hidden');\n}\n\nexport function showEndOfResultsToast() {\n  iziToast.info({\n    message: \"Sorry, you have reached the end of the search results.\",\n    position: 'topRight',\n  });\n}","\n// import { refs } from \"./refs\";\n// import { pixabayApi } from \"./pixabay-api\";\n// import { checkFunction } from \"./render-functions\";\n// import iziToast from \"izitoast\";\n// import \"izitoast/dist/css/iziToast.min.css\";\n\n\n// export function onFormSubmit(event) {\n//     event.preventDefault();\n//     refs.loadMore.classList.add(\"is-hidden\");\n//     refs.gallery.innerHTML = \"\";\n//     const userText = refs.input.value.trim();\n//     if (userText !== \"\") {\n//         pixabayApi(userText,1).then(checkFunction);\n//     } else {\n//         iziToast.error({\n//             message: \"Sorry, the search bar is empty. Please try again!\",\n//             position: \"topLeft\",\n//         });\n//     };\n// }\n\nimport { refs } from './refs';\nimport { getImagesByQuery } from './pixabay-api';\nimport {\n    createGallery,\n    clearGallery,\n    showLoader,\n    hideLoader,\n    showLoadMoreButton,\n    hideLoadMoreButton,\n    showEndOfResultsToast,\n} from './render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet currentPage = 1;\nlet currentSearchQuery = '';\nlet totalAvailablePages = 0;\nconst IMAGES_PER_PAGE = 15;\n\nrefs.loadMore.addEventListener('click', async () => {\n    currentPage += 1;\n\n    hideLoadMoreButton();\n    showLoader();\n\n    try {\n        const data = await getImagesByQuery(currentSearchQuery, currentPage);\n        createGallery(data.hits);\n\n        const galleryItemHeight = refs.gallery.firstElementChild.getBoundingClientRect().height;\n        window.scrollBy({\n            behavior: 'smooth',\n            top: galleryItemHeight * 2,\n        });\n\n        if (currentPage === totalAvailablePages) {\n            showEndOfResultsToast();\n            hideLoadMoreButton();\n        } else {\n            showLoadMoreButton();\n        }\n\n    } catch (error) {\n        console.error('Error loading additional images:', error);\n        iziToast.error({\n            message: 'Sorry, there was an error loading more images. Please try again later.',\n            position: 'topRight',\n        });\n        hideLoadMoreButton();\n    } finally {\n        hideLoader();\n    }\n});\n\n\nexport async function onFormSubmit(event) {\n    event.preventDefault();\n\n    const userInput = refs.input.value.trim();\n\n    if (userInput === '') {\n        iziToast.error({\n            message: 'Please enter something to search for images!',\n            position: 'topRight',\n        });\n        return;\n    }\n\n    currentSearchQuery = userInput;\n    currentPage = 1;\n    clearGallery();\n    hideLoadMoreButton();\n    showLoader();\n\n    try {\n        const data = await getImagesByQuery(currentSearchQuery, currentPage);\n\n        if (data.hits.length === 0) {\n            iziToast.info({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n            });\n            return;\n        }\n\n        totalAvailablePages = Math.ceil(data.totalHits / IMAGES_PER_PAGE);\n        createGallery(data.hits);\n\n        if (currentPage < totalAvailablePages) {\n            showLoadMoreButton();\n        } else {\n            showEndOfResultsToast();\n        }\n\n    } catch (error) {\n        console.error('Error during image search:', error);\n        iziToast.error({\n            message: 'Unfortunately, there was an error loading images. Please try again later!',\n            position: 'topRight',\n        });\n    } finally {\n        hideLoader();\n    }\n}","import { refs } from './js/refs';\nimport { onFormSubmit } from './js/onFormSubmit';\n\nrefs.form.addEventListener('submit', onFormSubmit);"],"names":["refs","API_KEY","BASE_URL","getImagesByQuery","query","page","params","axios","error","galleryLightboxInstance","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","showEndOfResultsToast","iziToast","currentPage","currentSearchQuery","totalAvailablePages","IMAGES_PER_PAGE","data","galleryItemHeight","onFormSubmit","event","userInput"],"mappings":"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"}